View(delhi)
View(graph)
graph <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(Date, median) %>% arrange(Date)
ts <- ts(graph, start = c(2017,1), frequency = 365)
ggseasonplot(ts, start)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Desktop/IndiaSpend/Air Quality Data")
y2020 <- read_csv("waqi-covid19-airqualitydata-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
graph <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01")
View(graph)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y_")
View(dat)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y_", values_from = "median")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median") %>% arrange(day_month)
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
View(delhi_2017)
View(delhi)
library(xlsx)
install.packages("xlsx")
library(xlsx)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(xlsx)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Desktop/IndiaSpend/Air Quality Data")
y2020 <- read_csv("waqi-covid19-airqualitydata-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm25.csv")
View(dat)
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "O3")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "O3.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(-day_month)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Desktop/IndiaSpend/Air Quality Data")
y2020 <- read_csv("waqi-covid19-airqualitydata-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(-day_month)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Desktop/IndiaSpend/Air Quality Data")
y2020 <- read_csv("waqi-covid19-airqualitydata-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "pm25.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "O3.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "O3.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "SO2.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "NO2.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "CO.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "pm25.csv")
y2020 <- read_csv("waqi-covid19-airqualitydata-2020.csv", skip = 4)
View(y2020)
india <- year2020 %>% filter(Country == "IN")
india <- y2020 %>% filter(Country == "IN")
View(india)
india %>% group_by(City) %>% summarise(n = n())
cities <- india %>% group_by(City) %>% summarise(n = n())
View(cities)
read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Desktop/IndiaSpend/Air Quality Data")
read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "O3.csv")
>= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
View(dat)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(-day_month)
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
View(delhi)
delhi <- delhi %>% filter(day_month == "12-31" | day_month == "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" | day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31")
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
#dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% arrange(day_month)
write_csv(dat, "pm10.csv")
View(delhi_2020)
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% rev(arrange(day_month))
dat <- dat[rev(order(day_month)]
dat <- dat[rev(order(day_month))]
dat <- dat[rev(order(dat$day_month))]
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month))]
dat <- dat[rev(order(dat$day_month)),]
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat %>% select(day_month, y2020, y2019, y2018, y2017) %>% arrange(day_month)
write_csv(dat, "pm25.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
View(dat)
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "pm25.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "O3.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "~/Delhi/pm10.csv")
write_csv(dat, "/Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "O3.csv")
# PM10
```{r}
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
```
# PM2.5
```{r}
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
```
# CO
```{r}
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
```
# NO2
```{r}
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
```
# SO2
```{r}
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
```
# O3
```{r}
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
```
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
